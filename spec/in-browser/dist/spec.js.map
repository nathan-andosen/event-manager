{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./spec/in-browser/index.js","webpack:///./spec/unit sync .spec$","webpack:///./spec/unit/event-listener.decorator.spec.ts","webpack:///./spec/unit/event-manager.spec.ts","webpack:///./src/event-listener.decorator.ts","webpack:///./src/event-manager.ts","webpack:///./src/index.ts","webpack:///./src/mixin.decorator.ts"],"names":[],"mappings":"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","file":"spec.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./spec/in-browser/index.js\");\n","\n// Our webpack.unit.tests.config.js file uses this to require all unit test files\n// so they can be tested in a browser for debugging\n\n// require all test files\nvar testsContext = require.context('../unit', true, /.spec$/);\ntestsContext.keys().forEach(testsContext);\n","var map = {\n\t\"./event-listener.decorator.spec\": \"./spec/unit/event-listener.decorator.spec.ts\",\n\t\"./event-manager.spec\": \"./spec/unit/event-manager.spec.ts\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./spec/unit sync recursive .spec$\";","import { EventManager, EventListener, INextFn } from '../../src';\n\ndescribe('Event Listener Decorator', () => {\n  it('should bind and unbind to events', () => {\n    class Hub extends EventManager {\n      public cnt = 0;\n      constructor() {\n        super();\n        this.init();\n      }\n      private init() {}\n      destroy() {}\n\n      @EventListener({\n        eventName: 'cnt-up',\n        initFn: 'init',\n        destroyFn: 'destroy'\n      })\n      protected cntListener() {\n        this.cnt++;\n      }\n    }\n    const hub = new Hub();\n    hub.emit('cnt-up');\n    expect(hub.cnt).toEqual(1);\n    hub.destroy();\n    hub.emit('cnt-up');\n    expect(hub.cnt).toEqual(1);\n  });\n\n  it('should use default angular init and destroy functions', () => {\n    class Hub extends EventManager {\n      public cnt = 0;\n\n      ngOnInit() { this.cnt++; }\n      ngOnDestroy() {}\n\n      @EventListener('cnt-up')\n      protected cntListener() {\n        this.cnt++;\n      }\n    }\n    const hub = new Hub();\n    hub['ngOnInit'](); // bind our event listener\n    hub.emit('cnt-up');\n    expect(hub.cnt).toEqual(2);\n    hub['ngOnDestroy'](); // unbind our event listener\n    hub.emit('cnt-up');\n    expect(hub.cnt).toEqual(2);\n  });\n\n  it('should use property class', () => {\n    class EventHub extends EventManager {}\n    class MyTest {\n      public cnt = 0;\n\n      constructor(private eventHub: EventHub) {\n        this.init();\n      }\n\n      private init() {}\n      destroy() {}\n\n      @EventListener({\n        eventName: 'cnt-up',\n        eventClass: EventHub.name,\n        initFn: 'init',\n        destroyFn: 'destroy'\n      })\n      cntListener() {\n        this.cnt++;\n      }\n\n      count() {\n        this.eventHub.emit('cnt-up');\n      }\n    }\n\n    const eventHub = new EventHub();\n    const myTest = new MyTest(eventHub);\n\n    expect(myTest.cnt).toEqual(0);\n    myTest.count();\n    expect(myTest.cnt).toEqual(1);\n    myTest.destroy();\n    myTest.count();\n    expect(myTest.cnt).toEqual(1);\n  });\n\n  it('should throw error as class name cant be found', () => {\n    let err: Error = null;\n    try {\n      class EventHub extends EventManager {}\n      class MyTest {\n        public cnt = 0;\n\n        constructor(private eventHub: EventHub) {\n          this.init();\n        }\n\n        private init() {}\n        destroy() {}\n\n        @EventListener({\n          eventName: 'cnt-up',\n          eventClass: 'fake-name',\n          initFn: 'init',\n          destroyFn: 'destroy'\n        })\n        cntListener() {\n          this.cnt++;\n        }\n\n        count() {\n          this.eventHub.emit('cnt-up');\n        }\n      }\n\n      const eventHub = new EventHub();\n      const myTest = new MyTest(eventHub);\n    } catch(e) {\n      err = e;\n    }\n    expect(err.message).toContain('@EventListener: Unable to find class with '\n      + 'name fake-name');\n  });\n\n  it('should throw error as event class does not extend EventManager', () => {\n    let err: Error = null;\n    try {\n      class Hub {\n        public cnt = 0;\n        constructor() {\n          this.init();\n        }\n        private init() {}\n        destroy() {}\n  \n        @EventListener({\n          eventName: 'cnt-up',\n          initFn: 'init',\n          destroyFn: 'destroy'\n        })\n        protected cntListener() {\n          this.cnt++;\n        }\n      }\n      const hub = new Hub();\n    } catch(e) {\n      err = e;\n    }\n    expect(err.message)\n      .toContain('@EventListener: Class Hub must extend EventManager');\n  });\n\n  it('should throw error as decorator is not on a method', () => {\n    let err: Error = null;\n    try {\n      class Hub extends EventManager {\n        public cnt = 0;\n        constructor() {\n          super();\n          this.init();\n        }\n        private init() {}\n        destroy() {}\n  \n        @EventListener({\n          eventName: 'cnt-up',\n          initFn: 'init',\n          destroyFn: 'destroy'\n        })\n        protected cntListener = true;\n      }\n      const hub = new Hub();\n    } catch(e) {\n      err = e;\n    }\n    expect(err.message)\n      .toContain('@EventListener: Decorator must be applied to a method');\n  });\n\n  it('should throw error as args are not set', () => {\n    let err: Error = null;\n    try {\n      class Hub extends EventManager {\n        public cnt = 0;\n        constructor() {\n          super();\n          this.init();\n        }\n        private init() {}\n        destroy() {}\n  \n        @EventListener(null)\n        protected cntListener() {\n          this.cnt++;\n        }\n      }\n    } catch(e) {\n      err = e;\n    }\n    expect(err.message).toContain('@EventListener: First argument must be of '\n      + 'type string or IEventListenerArgs')\n  });\n});","import { EventManager, EventListener, INextFn } from '../../src';\n\ndescribe('Event Manager', () => {\n\n  /**\n   * emit()\n   */\n  describe('emit()', () => {\n    it('should emit event', (done) => {\n      let cnt = 0;\n      class Hub extends EventManager {}\n      const hub = new Hub();\n      hub.on('event-a', (data, next) => {\n        cnt++;\n        expect(cnt).toEqual(1);\n        expect(data.a).toEqual('a');\n        done();\n      });\n      hub.emit('event-a', { a: 'a' });\n    });\n\n    it('should emit event and fire completed', (done) => {\n      let cnt = 0;\n      class Hub extends EventManager {}\n      const hub = new Hub();\n      hub.on('event-a', (data, next) => {\n        setTimeout(() => {\n          cnt++;\n          next();\n        }, 5);\n      });\n      hub.on('event-a', (data, next) => {\n        setTimeout(() => {\n          cnt++;\n          next().completed(() => {\n            expect(cnt).toEqual(2);\n            done();\n          });\n        }, 10);\n      });\n      hub.emit('event-a');\n    });\n  });\n\n\n  /**\n   * on()\n   */\n  describe('on()', () => {\n    it('should set scope', () => {\n      class Hub extends EventManager {\n        public cnt = 0;\n        constructor() {\n          super();\n          this.on('event-a', this.eventAListener, this);\n        }\n\n        eventAListener() {\n          this.cnt++;\n        }\n      }\n      const hub = new Hub();\n      hub.emit('event-a');\n      expect(hub.cnt).toEqual(1);\n      hub.emit('event-a');\n      expect(hub.cnt).toEqual(2);\n    });\n\n    it('should throw error as no event name is passed', () => {\n      let err: Error = null;\n      try {\n        class Hub extends EventManager {}\n        const hub = new Hub();\n        hub.on(null, () => {});\n      } catch(e) {\n        err = e;\n      }\n      expect(err.message).toContain('No eventName passed');\n    });\n\n    it('should throw error as no callback function is passed', () => {\n      let err: Error = null;\n      try {\n        class Hub extends EventManager {}\n        const hub = new Hub();\n        hub.on('event-a', undefined);\n      } catch(e) {\n        err = e;\n      }\n      expect(err.message).toContain('No callback function');\n    });\n  });\n\n\n  /**\n   * once()\n   */\n  describe('once()', () => {\n    it('should set scope and fire event only once', () => {\n      const scope = { a: 1 };\n      class Hub extends EventManager {}\n      const hub = new Hub();\n      hub.once('event-a', function() {\n        this.a++;\n      }, scope);\n      hub.emit('event-a');\n      expect(scope.a).toEqual(2);\n      hub.emit('event-a');\n      expect(scope.a).toEqual(2);\n    });\n\n    it('should throw error as no event name is passed', () => {\n      let err: Error = null;\n      try {\n        class Hub extends EventManager {}\n        const hub = new Hub();\n        hub.once(null, () => {});\n      } catch(e) {\n        err = e;\n      }\n      expect(err.message).toContain('No eventName passed');\n    });\n\n    it('should throw error as no callback function is passed', () => {\n      let err: Error = null;\n      try {\n        class Hub extends EventManager {}\n        const hub = new Hub();\n        hub.once('event-a', undefined);\n      } catch(e) {\n        err = e;\n      }\n      expect(err.message).toContain('No callback function');\n    });\n  });\n\n\n  /**\n   * off()\n   */\n  describe('off()', () => {\n    it('should stop listening to an event', () => {\n      let cnt = 0;\n      class Hub extends EventManager {}\n      const hub = new Hub();\n      const listener = (data, next) => {\n        cnt++;\n        expect(data.a).toEqual('a');\n      };\n      hub.on('event-a', listener);\n      hub.emit('event-a', { a: 'a' });\n      expect(cnt).toEqual(1);\n      hub.off('event-a', listener);\n      hub.emit('event-a', { a: 'a' });\n      expect(cnt).toEqual(1);\n    });\n  });\n\n\n  /**\n   * offAll()\n   */\n  describe('offAll()', () => {\n    it('should stop listening to all event', () => {\n      let cnt = 0;\n      class Hub extends EventManager {}\n      const hub = new Hub();\n      const listenerA1 = () => { cnt++; };\n      const listenerA2 = () => { cnt++; };\n      const listenerB = () => { cnt++; };\n      const listenerC = () => { cnt++; };\n      hub.on('event-a', listenerA1);\n      hub.on('event-a', listenerA2);\n      hub.on('event-b', listenerB);\n      hub.on('event-c', listenerC);\n      hub.emit('event-a');\n      expect(cnt).toEqual(2);\n      hub.emit('event-b');\n      expect(cnt).toEqual(3);\n      hub.emit('event-c');\n      expect(cnt).toEqual(4);\n      hub.offAll('event-a');\n      hub.emit('event-a');\n      expect(cnt).toEqual(4);\n      hub.emit('event-b');\n      expect(cnt).toEqual(5);\n      hub.offAll();\n      hub.emit('event-b');\n      expect(cnt).toEqual(5);\n      hub.emit('event-c');\n      expect(cnt).toEqual(5);\n    });\n  });\n});","// Arguments passed to the EventListener decorator\ninterface IEventListenerArgs {\n  eventName: string;\n  eventClass?: string;\n  initFn?: string;\n  destroyFn?: string;\n}\n\n\n/**\n * Get the property name of the event class (class that emits the events)\n *\n * @param {IEventListenerArgs} args\n * @param {*} classInstance\n * @returns {string}\n */\nfunction getClassPropertyName(args: IEventListenerArgs, instance: any): string {\n  if (!args.eventClass) return null;\n  const classKeys = Object.keys(instance);\n  for (const key of classKeys) {\n    if (instance[key].constructor.name === args.eventClass) return key;\n  }\n  throw new Error('@EventListener: Unable to find class with name '\n    + args.eventClass);\n}\n\n\n/**\n * Get the instance of the event class (class that emits the events)\n *\n * @param {IEventListenerArgs} args\n * @param {*} classInstance\n * @returns {*}\n */\nfunction getEventClass(args: IEventListenerArgs, classInstance: any): any {\n  const propertyName = getClassPropertyName(args, classInstance);\n  const instance = (propertyName) ? classInstance[propertyName] : classInstance;\n  if (!instance.on) {\n    throw new Error('@EventListener: Class ' + instance.constructor.name\n      + ' must extend EventManager');\n  }\n  return instance;\n}\n\n\n/**\n * Listen to events that are fired from EventManager classes\n *\n * @export\n * @param {(string|IEventListenerArgs)} arg1\n * @param {string} [arg2]\n * @returns\n */\nexport function EventListener (eventName: string, eventClass?: string): any;\nexport function EventListener (args: IEventListenerArgs): any;\nexport function EventListener (arg1: string|IEventListenerArgs, arg2?: string) {\n  return (target: any, propertyKey: string, descriptor: PropertyDescriptor) => {\n\n    if (!descriptor || typeof descriptor.value !== 'function') {\n      throw new Error('@EventListener: Decorator must be applied to a method');\n    }\n\n    if (!arg1\n    || (typeof arg1 !== 'string' && arg1.constructor !== {}.constructor)) {\n      throw new Error('@EventListener: First argument must be of type string '\n        + 'or IEventListenerArgs');\n    }\n\n    const params = (typeof arg1 === 'string')\n      ? { eventName: arg1, eventClass: arg2 } : arg1;\n    const initFnName = (params.initFn || 'ngOnInit');\n    const destroyFnName = (params.destroyFn || 'ngOnDestroy');\n    let eventClassInstance = null;\n\n    // hook into our init function so we can bind to an event\n    const initFnOrignal = (target[initFnName] || function(){});\n    target.constructor.prototype[initFnName] = function() {\n      initFnOrignal.apply(this, arguments);\n      eventClassInstance = getEventClass(params, this);\n      eventClassInstance.on(params.eventName, descriptor.value, this);\n    };\n\n    // hook into our destroy function so we can unbind from an event\n    const destroyFnOriginal = (target[destroyFnName] || function(){});\n    target.constructor.prototype[destroyFnName] = function() {\n      destroyFnOriginal.apply(this, arguments);\n      eventClassInstance.off(params.eventName, descriptor.value);\n    };\n  };\n};\n\n","\ntype ICallbackFn = (data?: any, next?: INextFn) => void;\ninterface IEventData {\n  fn: ICallbackFn;\n  scope?: any;\n  once?: boolean;\n}\n\n// type for the next() function\nexport type INextFn = () => { completed: (cb: () => void) => void };\n\n\n/**\n * Manage events with emit, on and off methods.\n *\n * @export\n * @class EventManager\n */\nexport class EventManager {\n\n  // subscribed events\n  private _events: { [eventName: string]: IEventData[] };\n  private set events(val: { [eventName: string]: IEventData[] }) {\n    this._events = val;\n  }\n  private get events(): { [eventName: string]: IEventData[] } {\n    return (this._events || (this._events = {}));\n  }\n\n\n  /**\n   * Emit an event\n   *\n   * @param {string} eventName\n   * @param {*} [data]\n   * @returns {void}\n   * @memberof EventManager\n   */\n  emit(eventName: string, data?: any) {\n    if (!this.events[eventName]) return;\n    let completedEvents = 0;\n    const completedCallbacks: Function[] = [];\n    for (const eventFunction of this.events[eventName]) {\n      eventFunction.fn.call(eventFunction.scope, data, () => {\n        // place in a timeout so that the return statement is executed first\n        setTimeout(() => {\n          if (++completedEvents === this.events[eventName].length) {\n            completedCallbacks.forEach((cb) => { cb(); });\n          }\n        }, 0);\n        return {\n          completed: (cb: Function) => { if (cb) completedCallbacks.push(cb); }\n        };\n      });\n      if (eventFunction.once) this.off(eventName, eventFunction.fn);\n    }\n  }\n\n\n  /**\n   * Listen to an event\n   *\n   * @param {string} eventName\n   * @param {(data?: any, next?: INextFn) => void} fn\n   * @param {*} [scope]\n   * @memberof EventManager\n   */\n  on(eventName: string, fn: ICallbackFn, scope?: any) {\n    this.addFn(eventName, fn, scope);\n  }\n\n\n  /**\n   * Listen to an event once\n   *\n   * @param {string} eventName\n   * @param {(data?: any, next?: INextFn) => void} fn\n   * @param {*} [scope]\n   * @memberof EventManager\n   */\n  once(eventName: string, fn: ICallbackFn, scope?: any) {\n    this.addFn(eventName, fn, scope, true);\n  }\n\n\n  /**\n   * Add a function callback for an event\n   *\n   * @private\n   * @param {string} eventName\n   * @param {ICallbackFn} fn\n   * @param {*} [scope]\n   * @param {boolean} [once=false]\n   * @memberof EventManager\n   */\n  private addFn(eventName: string, fn: ICallbackFn, scope?: any, once = false) {\n    const fnName = (once) ? 'once' : 'on';\n    if (!eventName) throw new Error(`No eventName passed to ${fnName}()`);\n    if (!fn) throw new Error(`No callback function passed to ${fnName}()`);\n    (this.events[eventName] || (this.events[eventName] = [])).push({\n      fn: fn,\n      scope: scope,\n      once: once\n    });\n  }\n\n\n  /**\n   * Unbind from an event\n   *\n   * @param {string} eventName\n   * @param {(data?: any, next?: INextFn) => void} fn\n   * @returns\n   * @memberof EventManager\n   */\n  off(eventName: string, fn: (data?: any, next?: INextFn) => void) {\n    if (!fn || !this.events[eventName]) return;\n    for (let i = 0 ; i < this.events[eventName].length; i++) {\n      if (this.events[eventName][i].fn === fn) {\n        this.events[eventName].splice(i, 1); break;\n      }\n    }\n  }\n\n\n  /**\n   * Unbind from all events.\n   *\n   * @param {string} [eventName] If set, only events with this name will be \n   * unsubscribed.\n   * @returns\n   * @memberof EventManager\n   */\n  offAll(eventName?: string) {\n    if (eventName) return delete this.events[eventName];\n    this.events = {};\n  }\n}","export * from './event-manager';\nexport * from './event-listener.decorator';\nexport * from './mixin.decorator';","export function Mixin(classes: any[], ignoreConstructor = true) {\n  return (target: Function) => {\n    classes.forEach((clas) => {\n      Object.getOwnPropertyNames(clas.prototype).forEach((name) => {\n        if (ignoreConstructor && name === 'constructor') return;\n        const propDesc = Object.getOwnPropertyDescriptor(clas.prototype, name);\n        Object.defineProperty(target.prototype, name, propDesc);\n      });\n    });\n  };\n};"],"sourceRoot":""}